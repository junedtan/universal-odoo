<openerp>
	<data>
		
		<record id="hr_holidays_reset" model="ir.ui.view">
			<field name="name">hr.holidays.reset</field>
			<field name="model">hr.holidays.reset.memory</field>
			<field name="arch" type="xml">
				<form string="Reset Holiday" after_save="universal.universal_action_past_holidays">
					<group>
						<field name="reset_before" />
						<field name="category_id" />
						<field name="leave_type" />
						<field name="duration" />
					</group>
				</form>
			</field>
		</record>
		
		<record id="universal_leave_rule_form" model="ir.ui.view">
			<field name="name">universal.leave.rule.form</field>
			<field name="model">universal.leave.rule</field>
			<field name="arch" type="xml">
				<form string="Leave Rule">
					<group>
						<field name="category_id" class="oe_inline"/>
						<field name="holiday_status_id" class="oe_inline"/>
						<field name="duration" />
					</group>
				</form>
			</field>
		</record>
		
		<record id="universal_leave_rule_list" model="ir.ui.view">
			<field name="name">universal.leave.rule.list</field>
			<field name="model">universal.leave.rule</field>
			<field name="arch" type="xml">
				<tree string="Leave Rule">
					<field name="category_id" />
					<field name="holiday_status_id" />
					<field name="duration" />
				</tree>
			</field>
		</record>
		
		<record id="universal_special_permit_form" model="ir.ui.view">
			<field name="name">universal.special.permit.form</field>
			<field name="model">universal.special.permit</field>
			<field name="arch" type="xml">
				<form string="Special Permit">
					<header>
						<button name="action_set_decision" 
							type="object"
							help="Set decision for special permit"
							groups=""
							states="approved">
							<div>Set Decision</div>
						</button>
						<field name="state" widget="statusbar" />
					</header>
					<group>
						<field name="employee_id" class="oe_inline" />
						<field name="req_date_start"/>
						<field name="req_date_end" />
						<field name="act_date_start" />
						<field name="act_date_end" />
						<field name="name" />
					</group>
				</form>
			</field>
		</record>
		
		<record id="universal_special_permit_list" model="ir.ui.view">
			<field name="name">universal.special.permit.list</field>
			<field name="model">universal.special.permit</field>
			<field name="arch" type="xml">
				<tree string="Special Permit">
					<field name="employee_id"/>
					<field name="req_date_start"/>
					<field name="req_date_end" />
					<field name="act_date_start" />
					<field name="act_date_end" />
					<field name="name" />
					<field name="decision" />
				</tree>
			</field>
		</record>
		
		<record id="universal_special_permit_set_decision" model="ir.ui.view">
			<field name="name">universal.special.permit.set.decision</field>
			<field name="model">universal.special.permit.decision.memory</field>
			<field name="arch" type="xml">
				<form string="Set Decision">
					<group>
						<field name="employee_id" />
						<field name="req_date_start" />
						<field name="req_date_end" />
						<field name="act_date_start" />
						<field name="act_date_end" />
						<field name="name" />
						<field name="decision" />
						<field name="absence_reason" attrs="{'invisible': [('decision','!=','absence')],'required': [('decision','=','absence')]}" />
						<field name="holiday_status_id" attrs="{'invisible': [('decision','!=','leave')],'required': [('decision','=','leave')]}" />
						<field name="permit_id" invisible="1"/>
					</group>
					<footer>
						<button name="action_set_decision" string="Save" type="object" class="oe_button oe_highlight" confirm="Are you sure to choose this decision for this special permit?"/>
						<button string="Cancel" special="cancel" />
					</footer>
				</form>
			</field>
		</record>
		
		<record id="hr_holidays_change_duration" model="ir.ui.view">
			<field name="name">hr.holidays.change.duration</field>
			<field name="model">hr.holidays.change.duration.memory</field>
			<field name="arch" type="xml">
				<form string="Change Duration">
					<group>
						<field name="employee_id" />
						<field name="holiday_status_id" />
						<field name="leave_id" />
						<field name="date_from_old" />
						<field name="date_to_old" />
						<field name="duration_old" /> days
						<field name="date_from_new" on_change="onchange_date_to(date_to_new, date_from_new)" />
						<field name="date_to_new" on_change="onchange_date_to(date_to_new, date_from_new)" />
						<field name="duration_new" /> days
					</group>
					<button name="action_change_duration" string="Change" type="object" class="oe_button oe_highlight" confirm="Are you sure to change this leave request's duration?"/>
					<button string="Cancel" special="cancel" />
				</form>
			</field>
		</record>
		
		<record id="hr_holidays_list" model="ir.ui.view">
			<field name="name">hr.holidays.list</field>
			<field name="model">hr.holidays</field>
			<field name="arch" type="xml">
				<tree string="Leaves" create="false" delete="false" edit="false">
					<field name="employee_id"/>
					<field name="holiday_type"/>
					<field name="type"/>
					<field name="holiday_status_id"/>
					<field name="name"/>
					<field name="date_from"/>
					<field name="date_to"/>
					<field name="number_of_days"/>
					<field name="state"/>
					<field name="category_id"/>
					<field name="department_id" />
					<field name="manager_id" />
					<field name="user_id" />
				</tree>
			</field>
		</record>
		
		<record model="ir.ui.view" id="allocation_company_new">
			<field name="name">Leaves Management</field>
			<field name="model">hr.holidays</field>
			<field name="inherit_id" ref="hr_holidays.allocation_company_new" />
			<field name="arch" type="xml">
				<xpath expr="//button[@name='validate']" position="attributes">
					<attribute name="groups">universal.group_universal_spv_hrd_staff,universal.group_universal_spv_hrd_driver,universal.group_universal_staff_adm_drv_1</attribute>
				</xpath>
				<xpath expr="//button[@name='refuse']" position="attributes">
					<attribute name="groups">universal.group_universal_spv_hrd_staff,universal.group_universal_spv_hrd_driver,universal.group_universal_staff_adm_drv_1</attribute>
				</xpath>
				<xpath expr="//button[@name='reset']" position="attributes">
					<attribute name="groups">universal.group_universal_spv_hrd_staff,universal.group_universal_spv_hrd_driver,universal.group_universal_staff_adm_drv_1</attribute>
				</xpath>
			</field>
		</record>
		
		<record model="ir.ui.view" id="edit_holiday_new">
			<field name="name">Leave Request</field>
			<field name="model">hr.holidays</field>
			<field name="inherit_id" ref="hr_holidays.edit_holiday_new" />
			<field name="arch" type="xml">
				
				<xpath expr="//field[@name='holiday_type']" position="attributes">
					<attribute name="groups">universal.group_universal_spv_hrd_staff,universal.group_universal_spv_hrd_driver,universal.group_universal_staff_adm_drv_1</attribute>
				</xpath>
				<xpath expr="//field[@name='employee_id']" position="attributes">
					<attribute name="groups">universal.group_universal_spv_hrd_staff,universal.group_universal_spv_hrd_driver,universal.group_universal_staff_adm_drv_1</attribute>
				</xpath>
				<xpath expr="//field[@name='department_id']" position="attributes">
					<attribute name="groups">universal.group_universal_spv_hrd_staff,universal.group_universal_spv_hrd_driver,universal.group_universal_staff_adm_drv_1</attribute>
				</xpath>
				
				<xpath expr="//button[@name='validate']" position="attributes">
					<attribute name="groups">universal.group_universal_spv_hrd_staff,universal.group_universal_spv_hrd_driver</attribute>
				</xpath>
				<xpath expr="//button[@name='refuse']" position="attributes">
					<attribute name="groups">universal.group_universal_spv_hrd_staff,universal.group_universal_spv_hrd_driver</attribute>
				</xpath>
				<xpath expr="//button[@name='reset']" position="attributes">
					<attribute name="groups">universal.group_universal_spv_hrd_staff,universal.group_universal_spv_hrd_driver</attribute>
				</xpath>
				<xpath expr="//button[@name='reset']" position="after">
					<button name="action_change_duration" 
						type="object"
						help="Change duration leave after approved"
						attrs="{'invisible':[('state','not in',('validate'))]}"
						groups="universal.group_universal_spv_hrd_staff,universal.group_universal_spv_hrd_driver">
						<div>Change Duration</div>
					</button>
				</xpath>
				<xpath expr="//field[@name='holiday_status_id']" position="replace" />
				<xpath expr="//field[@name='name']" position="after">
					<field name="holiday_status_id" on_change="onchange_status_id(holiday_status_id, date_from)" context="{'employee_id':employee_id}"/>
				</xpath>
			</field>
		</record>
		
		<record model="ir.ui.view" id="edit_holiday_status_form">
			<field name="name">hr.holidays.status.form</field>
			<field name="model">hr.holidays.status</field>
			<field name="inherit_id" ref="hr_holidays.edit_holiday_status_form" />
			<field name="arch" type="xml">
				<xpath expr="//field[@name='double_validation']" position="before">
					<field name="leave_duration" />
				</xpath>
			</field>
		</record>
	</data>
</openerp>