<openerp>
	<data>

		<record model="ir.ui.view" id="hr_contract_view_form">
			<field name="name">hr.contract.view.form</field>	
			<field name="model">hr.contract</field>
			<field name="inherit_id" ref="hr_contract.hr_contract_view_form" />
			<field name="priority" eval="100" />
			<field name="arch" type="xml">
				<xpath expr="//sheet" position="before">
					<header>
						<field name="state" widget="statusbar" readonly="1" />
					</header>
				</xpath>
				<xpath expr="//div[@class='oe_title']" position="before">
					<div class="oe_right oe_button_box">
						<button name="action_finish" class="oe_stat_button" icon="fa-stop" type="object" confirm="Are you sure to finish this contract?  This action cannot be undone." attrs="{'invisible': ['|',('contract_type','!=','contract_attc'),('state','!=','ongoing')]}">
							<div>Finish<br/>Contract</div>
						</button>
						<button name="action_terminate" class="oe_stat_button" icon="fa-eject" type="object" confirm="Are you sure to TERMINATE this contract? This action cannot be undone."  attrs="{'invisible': ['|',('contract_type','!=','contract_attc'),('state','!=','ongoing')]}">
							<div>Terminate<br/>Contract</div>
						</button>
					</div>
				</xpath>
				
				<xpath expr="//field[@name='employee_id']" position="attributes">
					<attribute name="on_change">onchange_employee_id(employee_id, contract_type)</attribute>
				</xpath>
				<xpath expr="//field[@name='working_hours']" position="attributes">
					<attribute name="attrs">{'required': [('contract_type','=','contract_attc')]}</attribute>
				</xpath>
				<xpath expr="//field[@name='type_id']" position="after">
					<field name="contract_type" on_change="onchange_employee_id(employee_id, contract_type)"/>
					<field name="parent_contract" class="oe_read_only"/>
				</xpath>
				<xpath expr="//field[@name='type_id']" position="replace" />
				<xpath expr="//field[@name='advantages']" position="replace" />
				<xpath expr="//field[@name='wage']" position="before">
					<field name="cust_contract" on_change="onchange_cust_contract(cust_contract)" 
					attrs="{'required': [('contract_type','=','contract_attc')],'invisible':[('contract_type','!=','contract_attc')]}"/>
					<field name="customer" class="oe_read_only"/>
					<field name="homebase" attrs="{'required': [('contract_type','=','contract_attc')],'invisible':[('contract_type','!=','contract_attc')]}" />
				</xpath>
				<xpath expr="//group[@name='duration_group']" position="after">
					<group string="Contract Letter">
						<field name="responsible" />
						<field name="responsible_job_id" />
					</group>
				</xpath>
				<xpath expr="//page[@name='information']" position="after">
					<page name="termination" string="Finish/Termination">
						<group>
							<group string="Finish">
								<field name="finished_by" />
								<field name="finished_date" readonly="1" />
							</group>
							<group string="Termination">
								<field name="terminate_by" />
								<field name="terminate_date" readonly="1" />
								<field name="terminate_reason" readonly="1" />
							</group>
						</group>
					</page>
				</xpath>
				<xpath expr="//field[@name='trial_date_start']" position="attributes">
					<attribute name="attrs">{'invisible': [('contract_type','=','contract_attc')]}</attribute>
				</xpath>
				<xpath expr="//field[@name='trial_date_end']" position="attributes">
					<attribute name="attrs">{'invisible': [('contract_type','=','contract_attc')]}</attribute>
				</xpath>
				<xpath expr="//page[@string='Work Permit']" position="replace" />
			</field>
		</record>
		
		<record model="ir.ui.view" id="hr_contract_view_search">
			<field name="name">hr.contract.view.search</field>	
			<field name="model">hr.contract</field>
			<field name="inherit_id" ref="hr_contract.hr_contract_view_search" />
			<field name="priority" eval="100" />
			<field name="arch" type="xml">
				<xpath expr="//field[@name='employee_id']" position="after">
					<group string="Contract State">
						<filter string="Ongoing" name="filter_ongoing" domain="[('state','=','ongoing')]" />
						<filter string="Finished" name="filter_finished" domain="[('state','=','finished')]" />
						<filter string="Terminated" name="filter_terminated" domain="[('state','=','terminated')]" />
					</group>
					<group string="Contract Type">
						<filter string="Employee" name="filter_employee" domain="[('contract_type','=','employee')]" />
						<filter string="Rent Driver" name="filter_rent_driver" domain="[('contract_type','=','rent_driver')]" />
						<filter string="Non-Rent Driver" name="filter_non_rent_driver" domain="[('contract_type','=','non_rent_driver')]" />
						<filter string="Contract Attachment" name="filter_contract_attc" domain="[('contract_type','=','contract_attc')]" />
					</group>
				</xpath>
			</field>
		</record>

		<record model="ir.ui.view" id="hr_contract_terminate_form">
			<field name="name">hr.contract.terminate.form</field>	
			<field name="model">hr.contract</field>
			<field name="priority" eval="102" />
			<field name="arch" type="xml">
				<form version="7.0" string="Terminate Contract">
					<group>
						<field name="id" invisible="1" />
						<field name="name" />
						<field name="employee_id" readonly="1" />
						<field name="terminate_reason" />
					</group>
					<footer>
						<button string="Terminate Contract" name="action_terminate_save" type="object" class="oe_highlight" />
						or
						<button string="Cancel" special="cancel" />
					</footer>
				</form>
			</field>
		</record>
		
		<record model="ir.ui.view" id="hr_contract_view_tree">
			<field name="name">hr.contract.view.tree</field>	
			<field name="model">hr.contract</field>
			<field name="inherit_id" ref="hr_contract.hr_contract_view_tree" />
			<field name="arch" type="xml">
				<xpath expr="//field[@name='type_id']" position="replace" />
				<xpath expr="//tree" position="inside">
					<field name="contract_type" invisible="context.get('mode')=='contract_attachment'" />
					<field name="parent_contract" invisible="context.get('mode')!='contract_attachment'" />
				</xpath>
			</field>
		</record>
		
		<record id="view_resource_calendar_attendance_tree" model="ir.ui.view">
            <field name="name">resource.calendar.attendance.tree</field>
            <field name="model">resource.calendar.attendance</field>
            <field name="inherit_id" ref="resource.view_resource_calendar_attendance_tree"></field>
            <field name="priority" eval="50" />
            <field name="arch" type="xml">
                <field name="hour_from" position="before">
                    <field name="working_time_type" />
                    <field name="max_hour" attrs="{'required': [('working_time_type','=','max_hour')]}" />
                </field>
                <xpath expr="//field[@name='hour_from']" position="attributes">
					<attribute name="attrs">{'required': [('working_time_type','=','duration')]}</attribute>
				</xpath>
                 <xpath expr="//field[@name='hour_to']" position="attributes">
					<attribute name="attrs">{'required': [('working_time_type','=','duration')]}</attribute>
				</xpath>
            </field>
        </record>
	</data>
</openerp>